# üöÄ AWS EBS Snapshot Cleaner | Automated Cost Optimization with Lambda & SNS

This project uses an AWS Lambda function to automatically identify and delete stale EBS snapshots ‚Äî including those from unattached, stopped, or deleted volumes ‚Äî and sends real-time alerts via Amazon SNS. It's a fully serverless, cost-saving automation aligned with real-world DevOps and FAANG-level infrastructure patterns.

---

## üîç Why This Matters

-  **Reduces AWS costs** by removing unused EBS snapshots that silently incur charges.
-  **Production-style architecture** with alerting and permission boundaries.
-  **FAANG-relevant tools**: AWS Lambda, IAM, EC2, SNS, boto3, infrastructure scripting.

---


## üîß Tech Stack

- **AWS Lambda** ‚Äì Serverless function to automate cleanup  
- **Amazon EC2 & EBS** ‚Äì Source of snapshots  
- **Amazon SNS** ‚Äì Sends email alerts when snapshots are deleted  
- **IAM** ‚Äì Access control via custom roles and policies  
- **Python (boto3)** ‚Äì AWS SDK to interact with EC2, Volumes, and SNS

---

## üöÄ Getting Started

### ‚úÖ Step-by-Step Deployment Guide

---

### 1. Launch an EC2 Instance & Snapshot

- Launch a test EC2 instance in any AWS region (e.g., `us-east-1`).
- Attach an EBS volume.
- Go to **EC2 ‚Üí Volumes ‚Üí Select volume ‚Üí Create Snapshot**.

---

### 2. Set Up the Lambda Function

- Go to **AWS Lambda ‚Üí Create Function**.
- Set **runtime** to **Python 3.12** or later.
- Use the code from `lambda_function.py` in this repository.
- Under **Configuration ‚Üí General**, set **timeout** to **10 seconds**.
- Deploy the function.

---

### 3. Set Up IAM Permissions

Attach the following permissions to your Lambda's execution role:

- `ec2:DescribeInstances`  
- `ec2:DescribeSnapshots`  
- `ec2:DescribeVolumes`  
- `ec2:DeleteSnapshot`  
- `sns:Publish`  

- create a **custom inline policy** granting exactly the actions above.

---

### 4. Create an SNS Topic for Alerts

- Go to **Amazon SNS ‚Üí Create Topic ‚Üí Standard**.
- Name it something like `snapshot-alerts`.
- Add a **subscription method** (e.g., **Email**).
- Confirm the subscription via the email link.

---

### 5. First Test: No Deletion Expected

- Keep the EC2 instance **running**.
- Run the Lambda function from the **Test** tab.
- Expected: No snapshots should be deleted.

---

### 6. Second Test: Trigger Deletion

- **Terminate the EC2 instance**.
- Run Lambda again.
- It will detect stale snapshots and:
  - **Delete** them
  - **Send alert** via SNS to your email
